
<!-- saved from url=(0081)https://www.cs.rutgers.edu/courses/210/classes/spring_2022_venugopal/hw1/hw1.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>
            .flipX video::-webkit-media-text-track-display {
                transform: matrix(-1, 0, 0, 1, 0, 0) !important;
            }
            .flipXY video::-webkit-media-text-track-display {
                transform: matrix(-1, 0, 0, -1, 0, 0) !important;
            }
            .flipXYX video::-webkit-media-text-track-display {
                transform: matrix(1, 0, 0, -1, 0, 0) !important;
            }</style><style>
            @keyframes blinkWarning {
                0% { color: red; }
                100% { color: white; }
            }
            @-webkit-keyframes blinkWarning {
                0% { color: red; }
                100% { color: white; }
            }
            .blinkWarning {
                -webkit-animation: blinkWarning 1s linear infinite;
                -moz-animation: blinkWarning 1s linear infinite;
                animation: blinkWarning 1s linear infinite;
            }</style></head><body>

<link href="./hw1_files/css" rel="stylesheet" type="text/css">
<style>
body { width: 90%; margin-left: 5%; 
font: 14px sans-serif, Trebuchet MS, Arial}
h2 {padding-top: 1.5em; }
.task { font: 14px Verdana, Arial, sans-serif; margin-top: 2em; color:blue;}
.func {font: 14px monospace; color: brown; }
.fnhdr { text-decoration: none; }
a, a:hover, a:visited { color: blue; }
.pts { color: red; }
</style>

<center>
<h2>
<p>Homework Assignment 1
</p><p>Movie Recommendation System

</p></h2>
<h3>
<p>Worth 120 points. 
</p><p>Posted Friday, Feb 11
</p><p><font color="red">Due Monday, Feb 28 at 11 PM in Canvas</font>
</p><p>Late Submission: By Tuesday, Mar 1, 11 PM in Canvas - 15 point penalty<br>
(15 points will be deducted from your score)
</p></h3>
</center>
<p>You are required to design a prototype movie recommendation program in Python according to the following guidelines.

</p><p>You have the option to work individually or with a partner. But no groups over 
2 people! If you choose to work with a partner, you don't have to tell us upfront
who you will be working with. We will post an announcement on Canvas in a few days
that will detail how to inform us about your partnership.

</p><p>
Make sure you abide by the <a href="https://www.cs.rutgers.edu/academics/undergraduate/academic-integrity-policy/programming-assignments">DCS Acadmic Integrity Policy for Programming Assignments.</a>

</p><hr>

<h3>What to submit</h3>

<p><font color="red">Write all the required functions described below in the
given <a href="https://www.cs.rutgers.edu/courses/210/classes/spring_2022_venugopal/hw1/hw1.py">template file named <b>hw1.py</b></a></font>

</p><p>Fill in the function code for all the functions in
this template. You may also implement other helper functions as needed. Make sure
you write ALL your test calls in the main() function. Do NOT write ANY code outside
of any of the functions. 

</p><p>When you are done writing and testing, 
<font color="red">submit ONLY the filled-in <b>hw1.py</b> file to Canvas.</font><br>
If you are working with a partner,
submit only ONE copy (either of you can submit, you will both get the same score.)

</p><p>Do not submit any other files, do not submit a zip file. We don't need you to submit
any files you may have used to test your program. (Make sure to test your programs on
files other than the samples we have provided, to cover the various paths of
logic in your code.)

</p><p>You are allowed up to 3 submissions (total over regular and late submissions), <font color="red">only the last submission will be graded</font>. Note: If you have a late submission, it will override any submissions you may
have made before the regular deadline, and you will be assessed the 15 point
penalty. The penalty of 15 points will be deducted from your score. 

</p><p><font color="red">Do NOT submit a Jupyter notebook, it will not be accepted for grading.</font>

</p><h3>How to test your code</h3>

<p>You can test your program by calling your functions in the <b>hw1.py</b>
file.<br> <font color="red">All test code must be in the main() function ONLY.
    If you write ANY code outside of any of the functions, you will lose credit.</font>

</p><p>As has been explained in class, execute your program like this:
</p><pre>&gt; python hw1.py    
</pre>
Make sure the test files are in the same folder as the program. You may 
develop and test your code in a Jupyter notebook, but for submission
you will need to move your code over to hw1.py and execute it as above to make
sure it works correctly. The process of moving code from a Jupyter notebook to
a Python file has been explained in class.

<p>You can run your tests on the given ratings and movies files, but testing
on only these files may not be sufficient. You should make your own test files
as well, to make sure that you cover the various paths of logic in your functions.
You are not required to submit any of your test files.

</p><p>You may retain the main() function when submitting, but we will ignore it.
When we test your submission, we will call the required functions individually on
our own test data, and points will be assigned to each function based on the
correctness of the returned value. 

</p><h3>Partial Credit</h3>

<p>There is no partial credit for code structure, etc. Credit is given only
when correct values
are returned from your functions. However, each function will be tested on several cases. So for instance,
if a function runs correctly on 2 out of 3 test cases, you will get full points for the 2
cases and zero for the third. (In this sense, there is partial credit for each function.)

</p><p>You may assume that all parameter values to your functions will be legitimate, so 
you are not required to check whether the parameter values are valid. Also, in any
function that requires the returned values to be sorted or ranked, ties may be 
broken arbitrarily between equal values. 

</p><hr>
<h3>Data Input</h3>
<ul>
<li><b>Ratings file</b>: A text file that contains movie ratings. Each line has 
the name (with year) of a movie, its rating (range 0-5 
inclusive), and the id of the user who rated the movie. A movie can have 
multiple ratings from different users. A user can rate a particular movie only once. 
A user can however rate multiple movies. Here's a <a href="https://www.cs.rutgers.edu/courses/210/classes/spring_2022_venugopal/hw1/movieRatingSample.txt">sample 
ratings file.</a>
</li><li><p><b>Movies file</b>: A text file that contains the genres of movies.
Each line has a genre, a movie id, and the name (with year) of 
the movie. To keep it simple, each movie belongs to 
a single genre. Here's a <a href="https://www.cs.rutgers.edu/courses/210/classes/spring_2022_venugopal/hw1/genreMovieSample.txt">sample 
movies file.</a><br>
Note: A movie name includes the year, since it's possible different
movies have the same title, but were made in different years.
</p></li></ul>
You may assume that input files will be correctly formatted, and data types will
be as expected. So you don't need to write code to catch any formatting or data typing
errors.

<p> For all computation of rating, do not round up (or otherwise modify) the rating
unless otherwise specified.
  
</p><p class="task">Task 1: Reading Data</p>

<p>
</p><ol>
<li><span class="pts">[10 pts]</span> Write a function <span class="func">read_ratings_data(f)</span> that takes 
in a ratings file, and returns a dictionary. The dictionary should have movie
as key, and the corresponding list of ratings as value.
<p>For example:&nbsp;&nbsp; <tt>movie_ratings_dict = { "The Lion King (2019)" : [6.0, 7.5, 5.1], "Titanic (1997)": [7] }</tt>
</p><p></p></li><li><span class="pts">[10 pts]</span>&nbsp;Write a function <span class="func">read_movie_genre(f)</span> that takes in a
movies file and returns 
a dictionary. The dictionary should have a one-to-one mapping between movie
and genre.
<p>For example&nbsp;&nbsp; <tt>{ "Toy Story (1995)" : "Adventure", "Golden Eye (1995)" : "Action" }</tt>
</p></li></ol>
Watch out for leading and trailing whitespaces in movie name and
genre name, and remove them when encountered.

<p class="task">Task 2: Processing Data</p>

<ol>
<li><span class="pts">[8 pts]</span>&nbsp;<span class="fnhdr">Genre dictionary</span>
<p>Write a function <span class="func">create_genre_dict</span> that takes as a
parameter a movie-to-genre dictionary, of the kind created in Task 1.2.
The function should return another dictionary in which a genre is mapped 
to all the movies in that genre.
</p><p>For example:&nbsp;&nbsp; <tt>{ genre1: [ m1, m2, m3], genre2: [m6, m7] }</tt>
</p><p></p></li><li><span class="pts">[8 pts]</span>&nbsp;<span class="fnhdr">Average Rating</span>
<p>Write a function <span class="func">calculate_average_rating</span> that takes 
as a parameter a ratings dictionary, of the kind created in Task 1.1.
It should return a dictionary where the movie is mapped to its average 
rating computed from the ratings list. 
</p><p>For example:&nbsp;&nbsp; <tt>{"Spider-Man (2002)": [3,2,4,5]}</tt>&nbsp;&nbsp;==&gt;
&nbsp;&nbsp;<tt>{"Spider-Man (2002)": 3.5}</tt>
</p></li></ol>

<p class="task">Task 3: Recommendation</p>

<ol>
<li><span class="pts">[10 pts]</span>&nbsp;<span class="fnhdr">Popularity based</span>
<p>In services such as Netflix and Spotify, you often see recommendations with the 
heading “Popular movies” or “Trending top 10”. 
</p><p>Write a function <span class="func">get_popular_movies</span>
that takes as parameters a dictionary of movie-to-average rating (
as created in Task 2.2), and an integer n (default should be 10).
The function should return a dictionary ( movie:average rating, same structure
as input dictionary) of top n movies 
based on the average ratings. If there are fewer than n movies, it should
return all movies in order of top average ratings.

</p><p></p></li><li><span class="pts">[8 pts]</span>&nbsp;<span class="fnhdr">Threshold Rating</span>
<p>Write a function <span class="func">filter_movies</span> that takes as parameters
a dictionary of movie-to-average rating (same as for the popularity based
function above), and a threshold rating with default value of 3. The function should
filter movies based on the threshold rating, and return a dictionary with same
structure as the input. For example, if the threshold rating is 3.5, the 
returned dictionary should have only those movies from the input whose average rating is 
equal to or greater than 3.5. 

</p><p></p></li><li><span class="pts">[12 pts]</span>&nbsp;<span class="fnhdr">Popularity + Genre based</span>
<p>In most recommendation systems, genre of the movie/song/book plays an important 
role. Often features like popularity, genre, artist are combined to present 
recommendations to a user.
</p><p>Write a function <span class="func">get_popular_in_genre</span> that, given a 
genre, a genre-to-movies dictionary (as created in Task 2.1), a dictionary of 
movie:average rating
(as created in Task 2.2), and an integer n (default 5), returns the 
top n most popular movies in that genre based on the average ratings.
The return value should be a dictionary of movie-to-average rating
of movies that make the cut.
If there are fewer than n movies, it should return all movies in order of top 
average ratings. 

</p><p>Genres will be from those in the movie:genre dictionary created
in Task 1.2.
The genre name will exactly match one of the genres in the
dictionary, so you do not need to do any upper or lower case conversion.

</p><p></p></li><li><span class="pts">[8 pts]</span>&nbsp;<span class="fnhdr">Genre Rating</span>
<p>One important analysis for the content platforms is to determine ratings by
genre.
</p><p>Write a function 
<span class="func">get_genre_rating</span> that takes the same parameters as
<span class="func">get_popular_in_genre</span> above, except for n,
and returns the average rating of the movies in the given genre.

</p><p></p></li><li><span class="pts">[12 pts]</span>&nbsp;<span class="fnhdr">Genre Popularity</span>
<p>Write a function <span class="func">genre_popularity</span> that takes as 
parameters a genre-to-movies dictionary (as created in Task 2.1), a movie-to-average rating
dictionary (as created in Task 2.2), and n (default 5), and returns the top-n
rated genres as a dictionary of genre:average rating. 
If there are fewer than n genres, it should
return all genres in order of top average ratings.
Hint: Use the above
<span class="func">get_genre_rating</span> function as a helper.

</p></li></ol>

<p class="task">Task 4: User Focused</p>

<ol>
<p></p><li><span class="pts">[10 pts]</span>&nbsp;Read the ratings file to return a user-to-movies dictionary that maps user 
ID to the associated movies and the corresponding ratings. Write a function named
<span class="func">read_user_ratings</span> for this, with the ratings file
as the parameter.
<p>For example: <tt>{ u1: [ (m1, r1), (m2, r2) ], u2: [ (m3, r3), (m8, r8) ] }</tt>
</p><p>where <tt>ui</tt> is user ID, <tt>mi</tt> is movie, 
<tt>ri</tt> is corresponding rating. You can handle user ID as int or string type,
but make sure you consistently use it as the same type everywhere in your 
code.
</p><p></p></li><li><span class="pts">[12 pts]</span>&nbsp;Write a function <span class="func">get_user_genre</span> that takes
as parameters a user id, the user-to-movies dictionary (as created in Task 4.1 above), 
and the movie-to-genre dictionary (as created in Task 1.2), and
returns the top genre that the user likes based on the user's ratings. Here, the 
top genre for 
the user will be determined by taking the average rating of the movies genre-wise 
that the user has rated. If multiple genres have the same highest ratings for the 
user, return any one of genres (arbitrarily) as the top genre.
<p></p></li><li><span class="pts">[12 pts]</span>&nbsp;Recommend 3 most popular (highest average rating) movies 
from the user's top genre that the user has not yet rated. Write a function
<span class="func">recommend_movies</span> for this, that takes a parameters
a user id, the user-to-movies dictionary (as created in Task 4.1 above), the 
movie-to-genre dictionary (as created in Task 1.2), and the movie-to-average rating
dictionary (as created in Task 2.2). The function should return a dictionary of
movie-to-average rating. If fewer than 3 movies make the cut, then return all the
movies that make the cut in order of top average ratings.
</li></ol>
<p>&nbsp;</p><p>&nbsp;</p><p>

</p></body></html>